<!DOCTYPE html>
<html>
<head>
    <title>Find Similar Cars</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        /* Add CSS styles for better visual appearance */
        #similarCars {
            margin-top: 20px;
        }
        .loading {
            display: none;
        }
    </style>
</head>
<body>

    <h1>Find Similar Cars</h1>

    <input type="file" id="carImageInput">
    <button id="analyzeButton">Analyze</button>
    <div class="loading">Analyzing image...</div>

    <div id="similarCars"></div>

    <script>
        $(document).ready(function() {
            $('#analyzeButton').click(function() {
                const fileInput = document.getElementById('carImageInput');
                const file = fileInput.files[0];
                const formData = new FormData();
                formData.append('file', file);

                $('.loading').show(); // Show loading indicator

                $.ajax({
                    url: 'https://mission2-cam.cognitiveservices.azure.com/',
                    
                    beforeSend: function(xhrObj){
                        xhrObj.setRequestHeader("Content-Type", "application/octet-stream");
                        xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key", "1ef7c8fc08244d26866a105c64a42289");
                    },
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(data) {
                        $('.loading').hide(); // Hide loading indicator
                        displayAnalysisResults(data); // Display analysis results
                    },
                    error: function(xhr, status, error) {
                        console.error('Error analyzing image:', error);
                        $('.loading').hide(); // Hide loading indicator
                        $('#similarCars').html('<p>An error occurred. Please try again.</p>'); // Display error message
                    }
                });
            });

            function displayAnalysisResults(data) {
                // Parse the analysis results and display relevant information to the user
                // Example: Display recognized objects in the image
                const objects = data.objects;
                const resultHtml = '<h2>Analysis Results</h2><ul>';
                for (var i = 0; i < objects.length; i++) {
                    resultHtml += '<li>' + objects[i].object + '</li>';
                }
                resultHtml += '</ul>';
                $('#similarCars').html(resultHtml);
            }
        });
    </script>

</body>
</html>